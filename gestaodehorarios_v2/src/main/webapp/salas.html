<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<link
	href="https://unpkg.com/tabulator-tables@4.8.4/dist/css/tabulator.min.css"
	rel="stylesheet">
<script type="text/javascript"
	src="https://unpkg.com/tabulator-tables@4.8.4/dist/js/tabulator.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<link rel="stylesheet" href="estilo.css">
</head>
<body>
	<div>
		<button style="margin: 15px" onclick="voltar()">Voltar</button>
	</div>

	<h1>Salas</h1>

	<div class="dropdown">
		<button class="dropbtn">Selecione as Colunas Visíveis</button>
		<div class="dropdown-content">
			<label><input type="checkbox" name="column" value="edificio"
				checked>Edifício</label> <label><input type="checkbox"
				name="column" value="nomeSala" checked>Nome sala</label> <label><input
				type="checkbox" name="column" value="capacidadeNormal" checked>Capacidade
				Normal</label> <label><input type="checkbox" name="column"
				value="capacidadeExame" checked>Capacidade Exame</label> <label><input
				type="checkbox" name="column" value="numCaracteristicas" checked>Nº
				características</label> <label><input type="checkbox" name="column"
				value="anfiteatro" checked>Anfiteatro aulas</label> <label><input
				type="checkbox" name="column" value="apoioTecnicoEventos" checked>Apoio
				técnico eventos</label> <label><input type="checkbox" name="column"
				value="arq1" checked>Arq 1</label> <label><input
				type="checkbox" name="column" value="arq2" checked>Arq 2</label> <label><input
				type="checkbox" name="column" value="arq3" checked>Arq 3</label> <label><input
				type="checkbox" name="column" value="arq4" checked>Arq 4</label> <label><input
				type="checkbox" name="column" value="arq5" checked>Arq 5</label> <label><input
				type="checkbox" name="column" value="arq6" checked>Arq 6</label> <label><input
				type="checkbox" name="column" value="arq9" checked>Arq 9</label> <label><input
				type="checkbox" name="column" value="byod" checked>BYOD
				(Bring Your Own Device)</label> <label><input type="checkbox"
				name="column" value="focusGroup" checked>Focus Group</label> <label><input
				type="checkbox" name="column" value="horarioVisivelPub" checked>Horário
				sala visível portal público</label> <label><input type="checkbox"
				name="column" value="labArqI" checked>Laboratório de
				Arquitectura de Computadores I</label> <label><input type="checkbox"
				name="column" value="labArqII" checked>Laboratório de
				Arquitectura de Computadores II</label> <label><input
				type="checkbox" name="column" value="labBasesEng" checked>Laboratório
				de Bases de Engenharia</label> <label><input type="checkbox"
				name="column" value="labEletro" checked>Laboratório de
				Electrónica</label> <label><input type="checkbox" name="column"
				value="labInfo" checked>Laboratório de Informática</label> <label><input
				type="checkbox" name="column" value="labJornalismo" checked>Laboratório
				de Jornalismo</label> <label><input type="checkbox" name="column"
				value="labRedesCompI" checked>Laboratório de Redes de
				Computadores I</label> <label><input type="checkbox" name="column"
				value="labRedesCompII" checked>Laboratório de Redes de
				Computadores II</label> <label><input type="checkbox" name="column"
				value="labTele" checked>Laboratório de Telecomunicações</label> <label><input
				type="checkbox" name="column" value="salaAulasMestrado" checked>Sala
				Aulas Mestrado</label> <label><input type="checkbox" name="column"
				value="salaAulasMestradoPlus" checked>Sala Aulas Mestrado
				Plus</label> <label><input type="checkbox" name="column"
				value="salaNee" checked>Sala NEE</label> <label><input
				type="checkbox" name="column" value="salaProvas" checked>Sala
				Provas</label> <label><input type="checkbox" name="column"
				value="salaReuniao" checked>Sala Reunião</label> <label><input
				type="checkbox" name="column" value="salaArquitetura" checked>Sala
				de Arquitectura</label> <label><input type="checkbox" name="column"
				value="salaAulaNormal" checked>Sala de Aulas normal</label> <label><input
				type="checkbox" name="column" value="videoconferencia" checked>Videoconferência</label>
			<label><input type="checkbox" name="column" value="atrio"
				checked>Átrio</label>

		</div>
	</div>
	<br>

	<div id="example-table"></div>

	<script type="text/javascript">

    var tabledata = []; // Inicializa a variável tabledata
    var table;

//     document.getElementById('fileInput').addEventListener('change', handleFileSelect, false);

//     // Função para ler o arquivo CSV
//     function handleFileSelect(event) {
//         var file = event.target.files[0];
//         var reader = new FileReader();
//         reader.onload = function(e) {
//             var contents = e.target.result;
//             lerCSV(contents);
//         };
//         reader.readAsText(file);
//     }

    function lerCSV(csv) {
    	
    	fetch(csv)
        .then(response => response.text())
        .then(text => {
            var linhas = text.trim().split('\n');
            linhas.shift(); // Remove o cabeçalho
        
        lines.forEach(function(line) {
            var columns = line.split(';');           
            
            tabledata.push({
                edificio: columns[0],
                nomeSala: columns[1],
                capacidadeNormal: columns[2],
                capacidadeExame: columns[3],
                numCaracteristicas: columns[4],
                anfiteatro: columns[5],
                apoioTecnicoEventos: columns[6],
                arq1: columns[7],
                arq2: columns[8],
                arq3: columns[9],
                arq4: columns[10],
                arq5: columns[11],
                arq6: columns[12],
                arq9: columns[13],
                byod: columns[14],
                focusGroup: columns[15],
                horarioVisivelPub: columns[16],
                labArqI: columns[17],
                labArqII: columns[18],
                labBasesEng: columns[19],
                labEletro: columns[20],
                labInfo: columns[21],
                labJornalismo: columns[22],
                labRedesCompI: columns[23],
                labRedesCompII: columns[24],
                labTele: columns[25],
                salaAulasMestrado: columns[26],
                salaAulasMestradoPlus: columns[27],
                salaNee: columns[28],
                salaProvas: columns[29],
                salaReuniao: columns[30],
                salaArquitetura: columns[31],
                salaAulaNormal: columns[32],
                videoconferencia: columns[33],
                atrio: columns[34],            
            });

        });
        // Inicializa a tabela Tabulator com os dados lidos
        iniciarTabela();
        })
        .catch(error => console.error(error));
	}

    // Função para inicializar a tabela Tabulator
    function iniciarTabela() {
        table = new Tabulator("#example-table", {
            data: tabledata,
            layout: "fitDatafill",
            pagination: "local",
            paginationSize: 10,
            paginationSizeSelector: [5, 10, 20, 40],
            movableColumns: true,
            paginationCounter: "rows",
            initialSort: [{ column: "curso", dir: "asc" }],
            columns: [
                { title: "Edifício", field: "edificio", headerFilter: "input" },
                { title: "Nome Sala", field: "nomeSala", headerFilter: "input" },
                { title: "Capacidade Normal", field: "capacidadeNormal", headerFilter: "input" },
                { title: "Capacidade Exame", field: "capacidadeExame", headerFilter: "input" },
                { title: "Nº Características", field: "numCaracteristicas", headerFilter: "input" },
                { title: "Anfiteatro Aulas", field: "anfiteatro", headerFilter: "input" },
                { title: "Apoio Técnico Eventos", field: "apoioTecnicoEventos", headerFilter: "input" },
                { title: "Arq 1", field: "arq1", headerFilter: "input" },
                { title: "Arq 2", field: "arq2", headerFilter: "input" },
                { title: "Arq 3", field: "arq3", headerFilter: "input" },
                { title: "Arq 4", field: "arq4", headerFilter: "input" },
                { title: "Arq 5", field: "arq5", headerFilter: "input" },
                { title: "Arq 6", field: "arq6", headerFilter: "input" },
                { title: "Arq 9", field: "arq9", headerFilter: "input" },
                { title: "BYOD (Bring Your Own Device)", field: "byod", headerFilter: "input" },
                { title: "Focus Group", field: "focusGroup", headerFilter: "input" },
                { title: "Horário Sala Visível Portal Público", field: "horarioVisivelPub", headerFilter: "input" },
                { title: "Laboratório de Arquitectura de Computadores I", field: "labArqI", headerFilter: "input" },
                { title: "Laboratório de Arquitectura de Computadores II", field: "labArqII", headerFilter: "input" },
                { title: "Laboratório de Bases de Engenharia", field: "labBasesEng", headerFilter: "input" },
                { title: "Laboratório de Electrónica", field: "labEletro", headerFilter: "input" },
                { title: "Laboratório de Informática", field: "labInfo", headerFilter: "input" },
                { title: "Laboratório de Jornalismo", field: "labJornalismo", headerFilter: "input" },
                { title: "Laboratório de Redes de Computadores I", field: "labRedesCompI", headerFilter: "input" },
                { title: "Laboratório de Redes de Computadores II", field: "labRedesCompII", headerFilter: "input" },
                { title: "Laboratório de Telecomunicações", field: "labTele", headerFilter: "input" },
                { title: "Sala Aulas Mestrado", field: "salaAulasMestrado", headerFilter: "input" },
                { title: "Sala Aulas Mestrado Plus", field: "salaAulasMestradoPlus", headerFilter: "input" },
                { title: "Sala NEE", field: "salaNee", headerFilter: "input" },
                { title: "Sala Provas", field: "salaProvas", headerFilter: "input" },
                { title: "Sala Reunião", field: "salaReuniao", headerFilter: "input" },
                { title: "Sala de Arquitectura", field: "salaArquitetura", headerFilter: "input" },
                { title: "Sala de Aulas Normal", field: "salaAulaNormal", headerFilter: "input" },
                { title: "Videoconferência", field: "videoconferencia", headerFilter: "input" },
                { title: "Átrio", field: "atrio", headerFilter: "input" },
            ],

        });
        
        // Adiciona um listener para as caixas de seleção
        var checkboxes = document.querySelectorAll('input[type=checkbox][name=column]');
        checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                var column = this.value;
                var visible = this.checked;
                table.toggleColumn(column, visible);
            });
        });
    }
    
    lerCSV('CaracterizacaoDasSalas.csv');
    
    function voltar() {
        history.back();
    }
    

    </script>
</body>
</html>
